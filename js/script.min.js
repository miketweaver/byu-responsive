/*********** PLUGINS **************//* LOG */// usage: log('inside coolFunc', this, arguments);
// paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
function adjustHeader(e){var t=$("#rating").outerHeight();$("body").css("padding-top",t);e===!1&&$("body").css("padding-top",0)}window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){var t=arguments,n;t.callee=t.callee.caller;n=[].slice.call(t);typeof console.log=="object"?log.apply.call(console.log,console,n):console.log.apply(console,n)}};(function(e){function t(){}for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),r;!!(r=n.pop());)e[r]=e[r]||t})(function(){try{console.log();return window.console}catch(e){return window.console={}}}());(function(e){var t=e.event,n,r={_:0},i=0,s,o;n=t.special.throttledresize={setup:function(){e(this).on("resize",n.handler)},teardown:function(){e(this).off("resize",n.handler)},handler:function(u,a){var f=this,l=arguments;s=!0;if(!o){e(r).animate(r,{duration:Infinity,step:function(){i++;if(i>n.threshold&&s||a){u.type="throttledresize";t.dispatch.apply(f,l);s=!1;i=0}if(i>9){e(r).stop();o=!1;i=0}}});o=!0}},threshold:0}})(jQuery);!function(e){"use strict";var t=function(t,n){this.$element=e(t);this.options=e.extend({},e.fn.typeahead.defaults,n);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.$menu=e(this.options.menu).appendTo("body");this.source=this.options.source;this.shown=!1;this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");this.$element.val(e);this.$element.change();return this.hide()},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:t.top+t.height,left:t.left});this.$menu.show();this.shown=!0;return this},hide:function(){this.$menu.hide();this.shown=!1;return this},lookup:function(t){var n=this,r,i;this.query=this.$element.val();if(!this.query)return this.shown?this.hide():this;r=e.grep(this.source,function(e){if(n.matcher(e))return e});r=this.sorter(r);return r.length?this.render(r.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){return e.replace(new RegExp("("+this.query+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;t=e(t).map(function(t,r){t=e(n.options.item).attr("data-value",r);t.find("a").html(n.highlighter(r));return t[0]});t.first().addClass("active");this.$menu.html(t);return this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0]));r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last());n.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this));(e.browser.webkit||e.browser.msie)&&this.$element.on("keydown",e.proxy(this.keypress,this));this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},keyup:function(e){switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation();e.preventDefault()},keypress:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault();this.prev();break;case 40:e.preventDefault();this.next()}e.stopPropagation()},blur:function(e){var t=this;setTimeout(function(){t.hide()},150)},click:function(e){e.stopPropagation();e.preventDefault();this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active");e(t.currentTarget).addClass("active")}};e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s));typeof n=="string"&&i[n]()})};e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'};e.fn.typeahead.Constructor=t;e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;t.preventDefault();n.typeahead(n.data())})})}(window.jQuery);(function(e){e.fn.hoverIntent=function(t,n){var r={sensitivity:7,interval:100,timeout:0};r=e.extend(r,n?{over:t,out:n}:t);var i,s,o,u,a=function(e){i=e.pageX;s=e.pageY},f=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(o-i)+Math.abs(u-s)<r.sensitivity){e(n).unbind("mousemove",a);n.hoverIntent_s=1;return r.over.apply(n,[t])}o=i;u=s;n.hoverIntent_t=setTimeout(function(){f(t,n)},r.interval)},l=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return r.out.apply(t,[e])},c=function(t){var n=jQuery.extend({},t),i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t));if(t.type=="mouseenter"){o=n.pageX;u=n.pageY;e(i).bind("mousemove",a);i.hoverIntent_s!=1&&(i.hoverIntent_t=setTimeout(function(){f(n,i)},r.interval))}else{e(i).unbind("mousemove",a);i.hoverIntent_s==1&&(i.hoverIntent_t=setTimeout(function(){l(n,i)},r.timeout))}};return this.bind("mouseenter",c).bind("mouseleave",c)}})(jQuery);(function(e){e.flexslider=function(t,n){var r=t;r.init=function(){r.vars=e.extend({},e.flexslider.defaults,n);r.data("flexslider",!0);r.container=e(".slides",r);r.slides=e(".slides > li",r);r.count=r.slides.length;r.animating=!1;r.currentSlide=r.vars.slideToStart;r.animatingTo=r.currentSlide;r.atEnd=r.currentSlide===0?!0:!1;r.eventType="ontouchstart"in document.documentElement?"touchstart":"click";r.cloneCount=0;r.cloneOffset=0;r.manualPause=!1;r.vertical=r.vars.slideDirection=="vertical";r.prop=r.vertical?"top":"marginLeft";r.args={};r.transitions="webkitTransition"in document.body.style;r.transitions&&(r.prop="-webkit-transform");if(r.vars.controlsContainer!==""){r.controlsContainer=e(r.vars.controlsContainer).eq(e(".slides").index(r.container));r.containerExists=r.controlsContainer.length>0}if(r.vars.manualControls!==""){r.manualControls=e(r.vars.manualControls,r.containerExists?r.controlsContainer:r);r.manualExists=r.manualControls.length>0}if(r.vars.randomize){r.slides.sort(function(){return Math.round(Math.random())-.5});r.container.empty().append(r.slides)}if(r.vars.animation.toLowerCase()=="slide"){r.transitions&&r.setTransition(0);r.css({overflow:"hidden"});if(r.vars.animationLoop){r.cloneCount=2;r.cloneOffset=1;r.container.append(r.slides.filter(":first").clone().addClass("clone")).prepend(r.slides.filter(":last").clone().addClass("clone"))}r.newSlides=e(".slides > li",r);var t=-1*(r.currentSlide+r.cloneOffset);if(r.vertical){r.newSlides.css({display:"block",width:"100%","float":"left"});r.container.height((r.count+r.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){r.css({position:"relative"}).height(r.slides.filter(":first").height());r.args[r.prop]=r.transitions?"translate3d(0,"+t*r.height()+"px,0)":t*r.height()+"px";r.container.css(r.args)},100)}else{r.args[r.prop]=r.transitions?"translate3d("+t*r.width()+"px,0,0)":t*r.width()+"px";r.container.width((r.count+r.cloneCount)*200+"%").css(r.args);setTimeout(function(){r.newSlides.width(r.width()).css({"float":"left",display:"block"})},100)}}else{r.transitions=!1;r.slides.css({width:"100%","float":"left",marginRight:"-100%"}).eq(r.currentSlide).fadeIn(r.vars.animationDuration)}if(r.vars.controlNav){if(r.manualExists)r.controlNav=r.manualControls;else{var i=e('<ol class="flex-control-nav"></ol>'),s=1;for(var o=0;o<r.count;o++){i.append("<li><a>"+s+"</a></li>");s++}if(r.containerExists){e(r.controlsContainer).append(i);r.controlNav=e(".flex-control-nav li a",r.controlsContainer)}else{r.append(i);r.controlNav=e(".flex-control-nav li a",r)}}r.controlNav.eq(r.currentSlide).addClass("active");r.controlNav.on(r.eventType,function(t){t.preventDefault();if(!e(this).hasClass("active")){r.controlNav.index(e(this))>r.currentSlide?r.direction="next":r.direction="prev";r.flexAnimate(r.controlNav.index(e(this)),r.vars.pauseOnAction)}})}if(r.vars.directionNav){var u=e('<ul class="flex-direction-nav"><li><a class="prev" href="#">'+r.vars.prevText+'</a></li><li><a class="next" href="#">'+r.vars.nextText+"</a></li></ul>");if(r.containerExists){e(r.controlsContainer).append(u);r.directionNav=e(".flex-direction-nav li a",r.controlsContainer)}else{r.append(u);r.directionNav=e(".flex-direction-nav li a",r)}r.vars.animationLoop||(r.currentSlide===0?r.directionNav.filter(".prev").addClass("disabled"):r.currentSlide==r.count-1&&r.directionNav.filter(".next").addClass("disabled"));r.directionNav.on(r.eventType,function(t){t.preventDefault();var n=e(this).hasClass("next")?r.getTarget("next"):r.getTarget("prev");r.canAdvance(n)&&r.flexAnimate(n,r.vars.pauseOnAction)})}if(r.vars.keyboardNav&&e("ul.slides").length==1){function a(e){if(r.animating)return;if(e.keyCode!=39&&e.keyCode!=37)return;if(e.keyCode==39)var t=r.getTarget("next");else if(e.keyCode==37)var t=r.getTarget("prev");r.canAdvance(t)&&r.flexAnimate(t,r.vars.pauseOnAction)}e(document).bind("keyup",a)}if(r.vars.mousewheel){r.mousewheelEvent=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";r.bind(r.mousewheelEvent,function(e){e.preventDefault();e=e?e:window.event;var t=e.detail?e.detail*-1:e.wheelDelta/40,n=t<0?r.getTarget("next"):r.getTarget("prev");r.canAdvance(n)&&r.flexAnimate(n,r.vars.pauseOnAction)})}if(r.vars.slideshow){r.vars.pauseOnHover&&r.vars.slideshow&&r.hover(function(){r.pause()},function(){r.manualPause||r.resume()});r.animatedSlides=setInterval(r.animateSlides,r.vars.slideshowSpeed)}if(r.vars.pausePlay){var f=e('<div class="flex-pauseplay"><span></span></div>');if(r.containerExists){r.controlsContainer.append(f);r.pausePlay=e(".flex-pauseplay span",r.controlsContainer)}else{r.append(f);r.pausePlay=e(".flex-pauseplay span",r)}var l=r.vars.slideshow?"pause":"play";r.pausePlay.addClass(l).text(l=="pause"?r.vars.pauseText:r.vars.playText);r.pausePlay.bind(r.eventType,function(t){t.preventDefault();if(e(this).hasClass("pause")){r.pause();r.manualPause=!0}else{r.resume();r.manualPause=!1}})}if("ontouchstart"in document.documentElement){var c,h,p,d,v,m,g=!1;r.each(function(){"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",y,!1)});function y(e){if(r.animating)e.preventDefault();else if(e.touches.length==1){r.pause();d=r.vertical?r.height():r.width();m=Number(new Date);p=r.vertical?(r.currentSlide+r.cloneOffset)*r.height():(r.currentSlide+r.cloneOffset)*r.width();c=r.vertical?e.touches[0].pageY:e.touches[0].pageX;h=r.vertical?e.touches[0].pageX:e.touches[0].pageY;r.setTransition(0);this.addEventListener("touchmove",b,!1);this.addEventListener("touchend",w,!1)}}function b(e){v=r.vertical?c-e.touches[0].pageY:c-e.touches[0].pageX;g=r.vertical?Math.abs(v)<Math.abs(e.touches[0].pageX-h):Math.abs(v)<Math.abs(e.touches[0].pageY-h);if(!g){e.preventDefault();if(r.vars.animation=="slide"&&r.transitions){r.vars.animationLoop||(v/=r.currentSlide==0&&v<0||r.currentSlide==r.count-1&&v>0?Math.abs(v)/d+2:1);r.args[r.prop]=r.vertical?"translate3d(0,"+(-p-v)+"px,0)":"translate3d("+(-p-v)+"px,0,0)";r.container.css(r.args)}}}function w(e){r.animating=!1;if(r.animatingTo==r.currentSlide&&!g&&v!=null){var t=v>0?r.getTarget("next"):r.getTarget("prev");r.canAdvance(t)&&Number(new Date)-m<550&&Math.abs(v)>20||Math.abs(v)>d/2?r.flexAnimate(t,r.vars.pauseOnAction):r.flexAnimate(r.currentSlide,r.vars.pauseOnAction)}this.removeEventListener("touchmove",b,!1);this.removeEventListener("touchend",w,!1);c=null;h=null;v=null;p=null}}r.vars.animation.toLowerCase()=="slide"&&e(window).resize(function(){if(!r.animating)if(r.vertical){r.height(r.slides.filter(":first").height());r.args[r.prop]=-1*(r.currentSlide+r.cloneOffset)*r.slides.filter(":first").height()+"px";if(r.transitions){r.setTransition(0);r.args[r.prop]=r.vertical?"translate3d(0,"+r.args[r.prop]+",0)":"translate3d("+r.args[r.prop]+",0,0)"}r.container.css(r.args)}else{r.newSlides.width(r.width());r.args[r.prop]=-1*(r.currentSlide+r.cloneOffset)*r.width()+"px";if(r.transitions){r.setTransition(0);r.args[r.prop]=r.vertical?"translate3d(0,"+r.args[r.prop]+",0)":"translate3d("+r.args[r.prop]+",0,0)"}r.container.css(r.args)}});r.vars.start(r)};r.flexAnimate=function(e,t){if(!r.animating){r.animating=!0;r.animatingTo=e;r.vars.before(r);t&&r.pause();r.vars.controlNav&&r.controlNav.removeClass("active").eq(e).addClass("active");r.atEnd=e==0||e==r.count-1?!0:!1;!r.vars.animationLoop&&r.vars.directionNav&&(e==0?r.directionNav.removeClass("disabled").filter(".prev").addClass("disabled"):e==r.count-1?r.directionNav.removeClass("disabled").filter(".next").addClass("disabled"):r.directionNav.removeClass("disabled"));if(!r.vars.animationLoop&&e==r.count-1){r.pause();r.vars.end(r)}if(r.vars.animation.toLowerCase()=="slide"){var n=r.vertical?r.slides.filter(":first").height():r.slides.filter(":first").width();r.currentSlide==0&&e==r.count-1&&r.vars.animationLoop&&r.direction!="next"?r.slideString="0px":r.currentSlide==r.count-1&&e==0&&r.vars.animationLoop&&r.direction!="prev"?r.slideString=-1*(r.count+1)*n+"px":r.slideString=-1*(e+r.cloneOffset)*n+"px";r.args[r.prop]=r.slideString;if(r.transitions){r.setTransition(r.vars.animationDuration);r.args[r.prop]=r.vertical?"translate3d(0,"+r.slideString+",0)":"translate3d("+r.slideString+",0,0)";r.container.css(r.args).one("webkitTransitionEnd transitionend",function(){r.wrapup(n)})}else r.container.animate(r.args,r.vars.animationDuration,function(){r.wrapup(n)})}else{r.slides.eq(r.currentSlide).fadeOut(r.vars.animationDuration);r.slides.eq(e).fadeIn(r.vars.animationDuration,function(){r.wrapup()})}}};r.wrapup=function(e){if(r.vars.animation=="slide")if(r.currentSlide==0&&r.animatingTo==r.count-1&&r.vars.animationLoop){r.args[r.prop]=-1*r.count*e+"px";if(r.transitions){r.setTransition(0);r.args[r.prop]=r.vertical?"translate3d(0,"+r.args[r.prop]+",0)":"translate3d("+r.args[r.prop]+",0,0)"}r.container.css(r.args)}else if(r.currentSlide==r.count-1&&r.animatingTo==0&&r.vars.animationLoop){r.args[r.prop]=-1*e+"px";if(r.transitions){r.setTransition(0);r.args[r.prop]=r.vertical?"translate3d(0,"+r.args[r.prop]+",0)":"translate3d("+r.args[r.prop]+",0,0)"}r.container.css(r.args)}r.animating=!1;r.currentSlide=r.animatingTo;r.vars.after(r)};r.animateSlides=function(){r.animating||r.flexAnimate(r.getTarget("next"))};r.pause=function(){clearInterval(r.animatedSlides);r.vars.pausePlay&&r.pausePlay.removeClass("pause").addClass("play").text(r.vars.playText)};r.resume=function(){r.animatedSlides=setInterval(r.animateSlides,r.vars.slideshowSpeed);r.vars.pausePlay&&r.pausePlay.removeClass("play").addClass("pause").text(r.vars.pauseText)};r.canAdvance=function(e){return!r.vars.animationLoop&&r.atEnd?r.currentSlide==0&&e==r.count-1&&r.direction!="next"?!1:r.currentSlide==r.count-1&&e==0&&r.direction=="next"?!1:!0:!0};r.getTarget=function(e){r.direction=e;return e=="next"?r.currentSlide==r.count-1?0:r.currentSlide+1:r.currentSlide==0?r.count-1:r.currentSlide-1};r.setTransition=function(e){r.container.css({"-webkit-transition-duration":e/1e3+"s"})};r.init()};e.flexslider.defaults={animation:"fade",slideDirection:"horizontal",slideshow:!0,slideshowSpeed:7e3,animationDuration:600,directionNav:!0,controlNav:!0,keyboardNav:!0,mousewheel:!1,prevText:"Previous",nextText:"Next",pausePlay:!1,pauseText:"Pause",playText:"Play",randomize:!1,slideToStart:0,animationLoop:!0,pauseOnAction:!0,pauseOnHover:!1,controlsContainer:"",manualControls:"",start:function(){},before:function(){},after:function(){},end:function(){}};e.fn.flexslider=function(t){return this.each(function(){e(this).find(".slides li").length==1?e(this).find(".slides li").fadeIn(400):e(this).data("flexslider")!=1&&new e.flexslider(e(this),t)})}})(jQuery);window.jQuery&&function(e){if(e.browser.msie)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}e.fn.rating=function(t){if(this.length==0)return this;if(typeof arguments[0]=="string"){if(this.length>1){var n=arguments;return this.each(function(){e.fn.rating.apply(e(this),n)})}e.fn.rating[arguments[0]].apply(this,e.makeArray(arguments).slice(1)||[]);return this}var t=e.extend({},e.fn.rating.options,t||{});e.fn.rating.calls++;this.not(".star-rating-applied").addClass("star-rating-applied").each(function(){var n,r=e(this),i=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),s=e(this.form||document.body),o=s.data("rating");if(!o||o.call!=e.fn.rating.calls)o={count:0,call:e.fn.rating.calls};var u=o[i];u&&(n=u.data("rating"));if(u&&n)n.count++;else{n=e.extend({},t||{},(e.metadata?r.metadata():e.meta?r.data():null)||{},{count:0,stars:[],inputs:[]});n.serial=o.count++;u=e('<span class="star-rating-control"/>');r.before(u);u.addClass("rating-to-be-drawn");if(r.attr("disabled")||r.hasClass("disabled"))n.readOnly=!0;r.hasClass("required")&&(n.required=!0);u.append(n.cancel=e('<div class="rating-cancel"><a title="'+n.cancel+'">'+n.cancelValue+"</a></div>").mouseover(function(){e(this).rating("drain");e(this).addClass("star-rating-hover")}).mouseout(function(){e(this).rating("draw");e(this).removeClass("star-rating-hover")}).click(function(){e(this).rating("select")}).data("rating",n))}var a=e('<div class="star-rating rater-'+n.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");u.append(a);this.id&&a.attr("id",this.id);this.className&&a.addClass(this.className);n.half&&(n.split=2);if(typeof n.split=="number"&&n.split>0){var f=(e.fn.width?a.width():0)||n.starWidth,l=n.count%n.split,c=Math.floor(f/n.split);a.width(c).find("a").css({"margin-left":"-"+l*c+"px"})}n.readOnly?a.addClass("star-rating-readonly"):a.addClass("star-rating-live").mouseover(function(){e(this).rating("fill");e(this).rating("focus")}).mouseout(function(){e(this).rating("draw");e(this).rating("blur")}).click(function(){e(this).rating("select")});this.checked&&(n.current=a);this.nodeName=="A"&&e(this).hasClass("selected")&&(n.current=a);r.hide();r.change(function(){e(this).rating("select")});a.data("rating.input",r.data("rating.star",a));n.stars[n.stars.length]=a[0];n.inputs[n.inputs.length]=r[0];n.rater=o[i]=u;n.context=s;r.data("rating",n);u.data("rating",n);a.data("rating",n);s.data("rating",o)});e(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn");return this};e.extend(e.fn.rating,{calls:0,focus:function(){var t=this.data("rating");if(!t)return this;if(!t.focus)return this;var n=e(this).data("rating.input")||e(this.tagName=="INPUT"?this:null);t.focus&&t.focus.apply(n[0],[n.val(),e("a",n.data("rating.star"))[0]])},blur:function(){var t=this.data("rating");if(!t)return this;if(!t.blur)return this;var n=e(this).data("rating.input")||e(this.tagName=="INPUT"?this:null);t.blur&&t.blur.apply(n[0],[n.val(),e("a",n.data("rating.star"))[0]])},fill:function(){var e=this.data("rating");if(!e)return this;if(e.readOnly)return;this.rating("drain");this.prevAll().andSelf().filter(".rater-"+e.serial).addClass("star-rating-hover")},drain:function(){var e=this.data("rating");if(!e)return this;if(e.readOnly)return;e.rater.children().filter(".rater-"+e.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var t=this.data("rating");if(!t)return this;this.rating("drain");if(t.current){t.current.data("rating.input").attr("checked","checked");t.current.prevAll().andSelf().filter(".rater-"+t.serial).addClass("star-rating-on")}else e(t.inputs).removeAttr("checked");t.cancel[t.readOnly||t.required?"hide":"show"]();this.siblings()[t.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(t,n){var r=this.data("rating");if(!r)return this;if(r.readOnly)return;r.current=null;if(typeof t!="undefined"){if(typeof t=="number")return e(r.stars[t]).rating("select",undefined,n);typeof t=="string"&&e.each(r.stars,function(){e(this).data("rating.input").val()==t&&e(this).rating("select",undefined,n)})}else r.current=this[0].tagName=="INPUT"?this.data("rating.star"):this.is(".rater-"+r.serial)?this:null;this.data("rating",r);this.rating("draw");var i=e(r.current?r.current.data("rating.input"):null);(n||n==undefined)&&r.callback&&r.callback.apply(i[0],[i.val(),e("a",r.current)[0]])},readOnly:function(t,n){var r=this.data("rating");if(!r)return this;r.readOnly=t||t==undefined?!0:!1;n?e(r.inputs).attr("disabled","disabled"):e(r.inputs).removeAttr("disabled");this.data("rating",r);this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}});e.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16};e(function(){e("input[type=radio].star").rating()})}(jQuery);$(function(){var e=0,t=!1,n=!1;$("div.star-rating").each(function(){var e=$(this).attr("id"),t=$('td label[for="'+e+'"]').html();$(this).append('<div class="label">'+t+"</div>")});$("div.star-rating a").click(function(r){r.preventDefault();var i=$(this).attr("title"),s=$(window).width(),o=$(window).height(),u="Tell us more...";$.ajax({type:"POST",data:"stars="+i+"&uid="+e+"&width="+s+"&height="+o,url:"processForm.php",success:function(t){if(e===0){e=t;log("Load was performed. UID = "+t)}else log("Rating updated. UID = "+e)}});switch(i){case"1":u="Yikes! Tell us what’s so terrible...";break;case"2":u="Got it. Tell us what needs to change...";break;case"3":u="No problem. Tell us how we can improve it...";break;case"4":u="Great! Tell us what you like or don’t like...";break;case"5":u="Thanks! Tell us what you like so much..."}if(!t){t=!0;$("form#rating table tbody").append('<tr id="comment"><td class="label" id="commentlabel"><a href="#">'+u+'</a></td><td class="input" id="commentbox"></td></tr>');$("#commentlabel a").hide().slideDown(150)}else n||$("#commentlabel a").html(u)});$("#rating").delegate("#commentlabel a","click",function(e){e.preventDefault();var t=$("#rating").height();$("#starlabel").html("<h3><strong>We'd love to have your feedback:</strong></h3>");$("#commentlabel").html('<label for="commentfield">Comments</label');$("#commentbox").html('<textarea id="commentfield" name="commentfield"></textarea>');$("form#rating table tbody").append('<tr id="email"><td class="label" id="emaillabel"><label for="emailfield">Email Address</label></td><td class="input" id="emailbox"><input id="emailfield" name="emailfield" type="text" /></td></tr>');$("#emailbox").append("<p>Add your email to get future site updates. We promise not to spam you or give your address away to anyone :)</p>");$("form#rating table tbody").append('<tr id="submit"><td>&nbsp;</td><td><a href="#" class="btn" id="feedbacksubmit">Send my feedback</a></td></tr>')});$("#rating").delegate("#feedbacksubmit","click",function(t){t.preventDefault();var n=$("#commentfield").val(),r=$("#emailfield").val(),i=$(".star-rating-on:last a").attr("title");$.ajax({type:"POST",data:"uid="+e+"&comments="+n+"&email="+r+"&stars="+i,url:"processForm.php",success:function(t){log("Comments updated. UID = "+e);log("Feedback: "+t)}});$("#rating").slideUp(250,function(){$(this).find("table").html('<tr><td class="label" id="thankslabel">Thanks for the comments!</td><td class="input" id="thanksbox">Feel free to come back often and leave more feedback or check our progreess! <a href="http://web.byu.edu/wiki/whats_happening_redesign" class="moreinfolink">Learn about the BYU Community website project</a><a href="http://beta.byu.edu/stats/m" class="moreinfolink">View live stats for this test</a></td></tr>').end().slideDown(250)})});$("#closebox").click(function(e){e.preventDefault();$("#rating").fadeOut(300);adjustHeader(!1)})});var byu_template=function(e){function x(){n=e(window).width();T("screenwidth",n,40);n>=r&&!u&&C();n>=i&&!a&&k();n>=s&&!f&&L();n>=o&&!l&&A()}function T(e,t,n){var r=new Date;r.setDate(r.getDate()+n);var i=escape(t)+(n==null?"":"; expires="+r.toUTCString());document.cookie=e+"="+i}function N(e){var t,n,r,i=document.cookie.split(";");for(t=0;t<i.length;t++){n=i[t].substr(0,i[t].indexOf("="));r=i[t].substr(i[t].indexOf("=")+1);n=n.replace(/^\s+|\s+$/g,"");if(n==e)return unescape(r)}}function C(){log("small");c=O("#news");M();P();_();D();u=!0}function k(){log("med");if(!e("body").hasClass("frontpage")){a=!0;return}if(h){U();z()}else if(y.md<w||y.md===undefined){y.md===undefined&&(y.md=0);y.md=y.md+1;window.setTimeout(k,b)}else log("Couldn't load big images");a=!0}function L(){log("large");if(d){m=O("#primary-nav");log("Load menu images")}else if(y.lg<w||y.lg===undefined){y.lg===undefined&&(y.lg=0);y.lg=y.lg+1;window.setTimeout(L,b)}else log("Couldn't load menu images");f=!0}function A(){log("x-large");if(h)B();else if(y.xl<w||y.xl===undefined){y.xl===undefined&&(y.xl=0);y.xl=y.xl+1;window.setTimeout(A,b)}else log("Couldn't load x-large images");l=!0}function O(t){e(t+" span.img").each(function(){var t=e(this),n=t.removeClass("img").attr("data-src"),r=t.attr("data-alt");t.replaceWith('<img src="'+n+'" alt="'+r+'" />')});return!0}function M(){log("Load features");e("#slider").load("feature.php #slides",function(e,t,n){if(t=="error"){log(e);return!1}R();h=!0})}function _(){e("#main-header").append('<div id="loader1"></div>');e("#loader1").load("nav.php #primary-nav",function(t,n,r){if(n=="error")return!1;e("#primary-nav").unwrap();d=!0;j()})}function D(){e("#header-top").append('<div id="loader2"></div>');e("#loader2").load("nav.php #secondary-nav",function(t,n,r){if(n=="error")return!1;e("#secondary-nav").unwrap();v=!0;I()})}function P(){e("#search-container").append('<div id="loader3"></div>');e("#loader3").load("search.php #searchForm",function(t,n,r){if(n=="error")return!1;e("#searchForm").unwrap();H();p=!0})}function H(){e("a.search").click(function(t){t.preventDefault();var i=e(this).attr("href"),s=e("#search-container"),o=s.hasClass("open");if(n<r){window.location.href=i;return!0}o?s.removeClass("open"):s.addClass("open")})}function B(){var t=e(".flex-control-nav");if(t[0]){var n=0,r=t.find("li a").empty();e("#slides > li").not(".clone").each(function(){var t=e(this),i=t.hasClass("full"),s=t.find("img"),o=r[n],u=s.clone(),a=u.attr("src");a=a.replace("lg","med");u.attr("src",a);i&&u.addClass("full");u.appendTo(o);n++});log("Feature menu images loaded")}else if(y.slidermenu<w||y.slidermenu===undefined){y.slidermenu===undefined&&(y.slidermenu=0);y.slidermenu=y.slidermenu+1;window.setTimeout(B,b)}else log("Couldn't load feature menu images")}function j(){e("#primary-nav-menu").delegate("a","click",function(t){t.preventDefault();var i=e(this).attr("href");if(n<r){window.location.href=i;return!0}if(e(this).hasClass("open")){e(this).removeClass("open");e("#primary-nav, #secondary-nav").removeClass("open");e("#content").removeClass("menu-open")}else{e(this).addClass("open");F()}return!1});e("#primary-nav .mega").prepend('<a href="#" class="back">Back</a>');e("#primary-nav").after('<div id="primary-click" class="click-off" style="display:none"></div>');e(".click-off").click(q);e("#primary-nav  > ul > li > a").each(function(){var t=e(this).html(),n=e(this).next(".mega");e(this).addClass("primary");n.prepend("<h3>"+t+"</h3>")});e("#primary-nav").delegate("a.primary","click",function(t){t.preventDefault();var r=e(this).parent();log(t.currentTarget.firstChild.data);if(r.hasClass("open"))q();else{e("#primary-nav > ul > li, #secondary-nav > ul > li").removeClass("open");r.addClass("open");e(".click-off").show()}n<600&&e("#primary-nav").animate({left:"-100%"},200,function(){e("#primary-nav").addClass("sub-open")})}).delegate("a.primary","hover",function(t){if(n>=800){var r=e(this).parent(),i=e("#primary-nav > ul > li.open").size();if(i>0){e("#primary-nav > ul > li").removeClass("open");r.addClass("open")}}});e("#primary-nav .mega").delegate("a.back","click",function(t){t.preventDefault();e("#primary-nav").animate({left:"0"},100,function(){e("#primary-nav").removeClass("sub-open");e("#primary-nav > ul > li").removeClass("open")})})}function F(){e("#secondary-nav > ul > li").removeClass("open");e("#primary-nav, #secondary-nav").addClass("open");e("#content").addClass("menu-open");if(n>=600&&n<800){var t=e("#primary-nav > ul > li.open").size();t===0&&e("#primary-nav > ul > li").first().addClass("open")}}function I(){var t=new Date,r=t.getDay(),i=t.getDate(),s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];e("#secondary-nav").wrap('<div class="flex-container">').addClass("flexslider").find("ul").first().addClass("slides");e("#secondary-nav.flexslider").flexslider(S);e("#secondary-nav #mobile a.events-m").prepend('<div class="day">'+s[r]+'</div><div class="date">'+i+"</div>");e("#secondary-nav > ul > li").addClass("top");e("#secondary-nav > ul").delegate("li.top","click",function(t){t.preventDefault();var r=e(this);n>599&&e("#primary-nav-menu a, #primary-nav").removeClass("open");if(r.hasClass("open")){e("#secondary-nav > ul > li").removeClass("open");e(".click-off").hide()}else{e("#secondary-nav > ul > li").removeClass("open");r.addClass("open");e(".click-off").show();n>=800&&e("#primary-nav li.open").removeClass("open")}}).delegate("li.top","hover",function(t){var n=e("#secondary-nav > ul > li.open").size();if(n>0){var r=e(this);e("#secondary-nav > ul > li").removeClass("open");r.addClass("open")}})}function q(){e("#primary-nav, #secondary-nav").removeClass("open");e("#content").removeClass("menu-open");e("#primary-nav").removeClass("sub-open");e("#primary-nav > ul > li").removeClass("open");e("#secondary-nav > ul > li").removeClass("open");e(".click-off").hide()}function R(){if(h){e("#content .flexslider").flexslider(E);e("html").removeClass("no-flexslider").addClass("yes-flexslider");log("Start slider")}else if(y.slider<w||y.slider===undefined){y.slider===undefined&&(y.slider=0);y.slider=y.slider+1;window.setTimeout(R,b)}else log("Couldn't start slider")}function U(){log("load big images");e(".flexslider img").each(function(){var t=e(this).attr("src"),n=e(this).closest("li");t=t.replace(".med.",".lg.");e("html").addClass("fullsize-images");n.hasClass("full")&&n.find("a").first().addClass("wide");e(this).attr("src",t)})}function z(){e(".flexslider .feature-description").each(function(){var t=e(this).attr("data-bg"),n=e(this).attr("data-gradient"),r=Modernizr.cssgradients,i=e(this).attr("data-text");if(n===undefined){var s=V(t,.35);e(this).css("background-color",s);e(this).css("box-shadow",W(t,"-webkit-")).css("box-shadow",W(t,"-moz-")).css("box-shadow",W(t,"-ms-")).css("box-shadow",W(t,"-o-")).css("box-shadow",W(t,""));e(this).css("border-left","1px solid #fff")}else{var s=V(t,n);e(this).css("background-color",t);e(this).css("box-shadow",W(s,"-webkit-")).css("box-shadow",W(s,"-moz-")).css("box-shadow",W(s,"-ms-")).css("box-shadow",W(s,"-o-")).css("box-shadow",W(s,""));e(this).css("border-left","1px solid #fff")}i=="light"&&e(this).addClass("lightText")})}function W(e,t){var n=t+"inset 10px 0px 110px"+e;return n}function X(e,t,n){var r=t/3,i=e,s=V(e,r),o=V(e,t),u="left, "+i+"0%,"+s+"20%,"+s+"80%,"+i+"100%",a=n+"linear-gradient("+u+")";return a}function V(e,t){e=String(e).replace(/[^0-9a-f]/gi,"");e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);t=t||0;var n="#",r,i;for(i=0;i<3;i++){r=parseInt(e.substr(i*2,2),16);r=Math.round(Math.min(Math.max(0,r+r*t),255)).toString(16);n+=("00"+r).substr(r.length)}return n}var t=null,n=0,r=300,i=600,s=800,o=1300,u=!1,a=!1,f=!1,l=!1,c=!1,h=!1,p=!1,d=!1,v=!1,m=!1,g=!1,y={},b=100,w=600,E={animation:"slide",slideshow:!1,animationDuration:300,prevText:"Previous story",nextText:"Next story",before:function(){n<1247&&e(".flex-control-nav, .flex-direction-nav").hide()},after:function(){n<1247&&e(".flex-control-nav, .flex-direction-nav").fadeIn(200)}},S={animation:"slide",slideshow:!1,animationDuration:300,prevText:"Previous",nextText:"Next",controlNav:!1};e(function(){var r=N("screenwidth");n=e(window).width();t=e("body").attr("data-width");log("Start width: ",t);e(window).on("throttledresize",x);x();log("Screen width: "+n);T("screenwidth",n,40)})}(jQuery);